<!-- #FIX: Rename file to _posts.html.erb -->
<div class='col-lg-offset-1 col-lg-7'>

  <% @posts.each do |post| %>

    <%= render 'shared/show_post', post: post %>

      <span class='name-bold'>
        <%= post.user.name.capitalize %>
      </span>

        <br><br>

        <div class='post-margin'>

          <%= linkify_mentions(linkify_hashtags(post.content)) %>

          <% post.post_documents.each do |document| %>

            <div class='attachment comment-margin'>
              <span>
                <% if document.attachment_content_type.split('/').first == 'image' %>
                  <%= render 'shared/show_attachment', image: document %>
                <% else %>
                  <%= document.attachment_file_name %>
                  <%= link_to attachment_type(document), document.attachment.url %>
                <% end %>
              </span>

              <% if can_edit_user?(post.user) %>
                <%= link_to 'Delete', attachment_path(document), method: :delete, remote: true, class: 'delete-attachment' %>
              <% end %>

            </div>

          <% end %>
          <br>

          <%= link_to_like_unlike post, :post %>

          <div class='count'>
            <%= post.likes.count %>
          </div>


          <% if can_edit_user?(post.user) %>

            <%= link_to 'Delete', post_path(post.id), method: :delete, class: 'delete-post' %>

          <% end %>

        </div>

        <%= render 'home/show_comments', post: post %>

        <% if( !post.group || current_user.groups.include?(post.group) ) %>

          <%= render 'shared/post_comment_form', post: post %>

        <% end %>

        <br> <br> <br> <br>
      </div>
    </div>
  <% end %>

  <br>

</div>
